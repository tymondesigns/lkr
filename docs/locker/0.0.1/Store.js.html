<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Store.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="JSONSerializer.html">JSONSerializer</a><ul class='methods'><li data-type='method'><a href="JSONSerializer.html#.serialize">serialize</a></li><li data-type='method'><a href="JSONSerializer.html#.unserialize">unserialize</a></li></ul></li><li><a href="Locker.html">Locker</a><ul class='methods'><li data-type='method'><a href="Locker.html#.make">make</a></li><li data-type='method'><a href="Locker.html#add">add</a></li><li data-type='method'><a href="Locker.html#all">all</a></li><li data-type='method'><a href="Locker.html#clean">clean</a></li><li data-type='method'><a href="Locker.html#count">count</a></li><li data-type='method'><a href="Locker.html#driver">driver</a></li><li data-type='method'><a href="Locker.html#each">each</a></li><li data-type='method'><a href="Locker.html#empty">empty</a></li><li data-type='method'><a href="Locker.html#forget">forget</a></li><li data-type='method'><a href="Locker.html#get">get</a></li><li data-type='method'><a href="Locker.html#has">has</a></li><li data-type='method'><a href="Locker.html#keys">keys</a></li><li data-type='method'><a href="Locker.html#namespace">namespace</a></li><li data-type='method'><a href="Locker.html#pull">pull</a></li><li data-type='method'><a href="Locker.html#put">put</a></li></ul></li><li><a href="Store.html">Store</a><ul class='methods'><li data-type='method'><a href="Store.html#clear">clear</a></li><li data-type='method'><a href="Store.html#forEach">forEach</a></li><li data-type='method'><a href="Store.html#getItem">getItem</a></li><li data-type='method'><a href="Store.html#hasItem">hasItem</a></li><li data-type='method'><a href="Store.html#isSupported">isSupported</a></li><li data-type='method'><a href="Store.html#removeItem">removeItem</a></li><li data-type='method'><a href="Store.html#setItem">setItem</a></li></ul></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">Store.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import JSONSerializer from './Serializers/JSONSerializer';

/**
 * A decorator for a Storage implementation
 *
 * @author Sean Tymon &lt;tymon148@gmail.com>
 */
class Store {

    /**
     * Create a Store instance.
     *
     * @param   {Storage}  driver        The storage driver
     * @param   {Object}   [serializer]  The serializer to use
     *
     * @return  {void}
     */
    constructor (driver, serializer) {
        this.driver = driver;
        this.serializer = serializer || JSONSerializer;
    }

    /**
     * Add a key/value pair to storage
     *
     * @param  {String}  key  The key to add
     * @param  {Mixed}   val  The value to add
     *
     * @throws {Error}  If the storage access is disallowed.
     *
     * @return {Store}
     */
    setItem (key, val) {
        try {
            this.driver.setItem(key, this.serializer.serialize(val));
        } catch (e) {
            if (['QUOTA_EXCEEDED_ERR',
                'NS_ERROR_DOM_QUOTA_REACHED',
                'QuotaExceededError'].indexOf(e.name) !== -1) {
                throw new Error('The Storage quota has been exceeded');
            } else {
                throw new Error(`Could not add item with key "${key}"`);
            }
        }

        return this;
    }

    /**
     * Retrieve a value from storage by key
     *
     * @param  {String}  key  The key to retreive
     *
     * @return {Mixed}
     */
    getItem (key) {
        return this.serializer.unserialize(this.driver.getItem(key));
    }

    /**
     * Determine whether the key exists in storage.
     *
     * @param   {String}   key  The key to check
     *
     * @return  {Boolean}
     */
    hasItem (key) {
        return this.driver.hasOwnProperty(key);
    }

    /**
     * Remove an item from storage.
     *
     * @param   {String}  key  The key to remove
     *
     * @return  {Boolean}
     */
    removeItem (key) {
        if (! this.hasItem(key)) return false;

        this.driver.removeItem(key);

        return true;
    }

    /**
     * Remove all items from storage.
     *
     * @return  {Store}
     */
    clear () {
        this.driver.clear();

        return this;
    }

    /**
     * Iterate through the items in storage and execute the callback.
     *
     * @param   {Function}  callback            The callback function
     * @param   {Object}    [thisContext=this]  The context of this keyword
     *
     * @return  {void}
     */
    forEach (callback, thisContext = this) {
        for (let item in this.driver) {
            callback.call(thisContext, this.driver[item], item);
        }
    }

    /**
     * Determine whether the storage driver is supported.
     *
     * @return  {Boolean}
     */
    isSupported () {
        let l = 'l';
        try {
            this.driver.setItem(l, l);
            this.driver.removeItem(l);

            return true;
        } catch (e) {
            return false;
        }
    }

    /**
     * Get the number of items in storage.
     *
     * @return  {Integer}
     */
    get length () {
        return this.driver.length;
    }

}

export default Store;
</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.2</a> on Tue Dec 13 2016 20:49:27 GMT+0000 (GMT) using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
